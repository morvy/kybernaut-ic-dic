"use strict";!function(i){var l="";function e(i,l){var e;return function(){for(var o=arguments.length,n=new Array(o),a=0;a<o;a++)n[a]=arguments[a];var c=this;clearTimeout(e),e=setTimeout(function(){return i.apply(c,n)},l)}}function o(){switch(woolab.ares_fill&&(i(".woolab-ic-dic-tip").remove(),t()),i("#billing_ic_field").slideDown(),i("#billing_dic_field").slideDown(),i("#billing_country").val()){case"SK":i("#billing_dic_dph_field").slideDown(),i("#billing_dic_field > label").addClass("woolab-ic-dic-required");break;case"CZ":i("#billing_dic_dph_field").slideUp(),i("#billing_dic_field > label").removeClass("woolab-ic-dic-required");break;default:i("#billing_dic_dph_field").slideUp(),i("#billing_dic_field > label").removeClass("woolab-ic-dic-required")}woolab.ares_check&&function(){r(i("#billing_ic")),i(document.body).on("focusin","#billing_ic",function(){l=i("#billing_ic").val()});var o=e(function(){var e=i("#billing_ic");e.val()!==l&&r(e)},500);i("#billing_ic").on("input",o)}(),i("#billing_company_field").slideDown()}function n(){var l="SK"==i("#billing_country").val()?"billing_dic_dph":"billing_dic";i("#billing_company, #billing_ic, #billing_dic, #billing_dic_dph").each(function(e,o){o.getAttribute("data-value")&&(o.value=o.getAttribute("data-value"),o.id==l&&o.value.length&&i(document.body).trigger("update_checkout"))})}function a(i){i.removeClass("kbnt-wrong").removeClass("woocommerce-invalid")}function c(i){i.addClass("kbnt-wrong").addClass("woocommerce-invalid").removeClass("woocommerce-validated")}function t(){i("#billing_company").removeAttr("readonly"),i("#billing_dic").removeAttr("readonly"),i("#billing_postcode").removeAttr("readonly"),i("#billing_city").removeAttr("readonly"),i("#billing_address_1").removeAttr("readonly")}function r(e){if("CZ"===i("#billing_country").val()){var o=e.val();if(o!==l){var n=i("#billing_ic_field"),r='<span role="alert" class="woolab-ic-dic-tip">'+woolab.l18n_not_valid+"</span>";i(".woolab-ic-dic-tip").remove(),a(n),n.removeClass("kbnt-ok").removeClass("woocommerce-validated"),7!=o.length&&8!=o.length||null==o.match(/^[0-9]+$/)?(t(),o.length>0?c(n):a(n)):i.ajax({url:woolab.ajaxurl,data:{action:"ajaxAres",ico:o},beforeSend:function(){n.addClass("kbnt-validating"),n.append('<span role="info" class="woolab-ic-dic-tip">'+woolab.l18n_validating+"</span>")},success:function(l){if(n.removeClass("kbnt-validating"),l)if(0==(l=JSON.parse(l)).error){if(i(".woolab-ic-dic-tip").remove(),n.addClass("kbnt-ok").addClass("woocommerce-validated").removeClass("woocommerce-invalid"),woolab.ares_fill){if(i("#billing_same_as_shipping")&&i("#billing_same_as_shipping").is(":checked")&&window.CollapsibleBlock){document.querySelector("#billing_same_as_shipping").checked=!1;var e=document.querySelector("#woocommerce-billing-fields__field-wrapper");e&&CollapsibleBlock.expand(e);var o=document.querySelector("#fc-expansible-form-section__toggle-plus--billing_company"),a=document.querySelector("#fc-expansible-form-section__content--billing_company");o&&CollapsibleBlock.collapse(o),a&&CollapsibleBlock.expand(a);var c=document.querySelector("#fc-expansible-form-section__toggle-plus--billing_dic"),s=document.querySelector("#fc-expansible-form-section__content--billing_dic");c&&CollapsibleBlock.collapse(c),s&&CollapsibleBlock.expand(s)}i("#billing_company").val(l.spolecnost).attr("readonly",!0),i("#billing_dic").val(l.dic).attr("readonly",!0),i("#billing_address_1").val(l.adresa).attr("readonly",!0),i("#billing_postcode").val(l.psc).attr("readonly",!0),i("#billing_city").val(l.mesto).attr("readonly",!0),n.append('<span role="info" class="woolab-ic-dic-tip">'+woolab.l18n_ok+"</span>"),i("body").trigger("update_checkout")}}else d(n),i(".woolab-ic-dic-tip").length>0&&i(".woolab-ic-dic-tip").remove(),t(),l.internal_error&&woolab.ignore_check_fail||n.append('<span role="alert" class="woolab-ic-dic-tip error">'+l.error+"</span>");else d(n),0==i(".woolab-ic-dic-tip").length&&(t(),n.append(r))},error:function(l){0==i(".woolab-ic-dic-tip").length&&(e.val(""),d(n),n.append('<span role="alert" class="woolab-ic-dic-tip error">'+woolab.l18n_error+"</span>"))}}),l=e.val()}}}function d(l){woolab.ares_fill&&(woolab.ignore_check_fail||(i("#billing_company").val(""),i("#billing_dic").val(""),i("#billing_postcode").val(""),i("#billing_city").val(""),i("#billing_address_1").val("")),t()),c(l)}i(document).ready(function(){i(document.body).on("input",".woolab-ic-dic-no_spaces input",function(){i(this).val(function(i,l){return l.replace(/\s+/g,"")})});var l=i("#billing_iscomp");l.length&&!l.prop("checked")||(n(),o()),i(document.body).on("change","#billing_country, #billing_iscomp",function(){var l,e=i("#billing_iscomp");!e.length||e.prop("checked")?(n(),o()):(i(".woolab-ic-dic-toggle").slideUp(),l="SK"==i("#billing_country").val()?"billing_dic_dph":"billing_dic",i("#billing_company, #billing_ic, #billing_dic, #billing_dic_dph").each(function(e,o){o.setAttribute("data-value",o.value),o.id==l&&o.value.length&&i(document.body).trigger("update_checkout"),o.value=""}))});var a=e(function(){var l=i(this),e=i("#billing_country").val();"SK"!==e&&"billing_dic"===l.attr("id")&&i(document.body).trigger("update_checkout"),"SK"===e&&"billing_dic_dph"===l.attr("id")&&i(document.body).trigger("update_checkout")},750);i("#billing_dic, #billing_dic_dph").on("input",a)})}(jQuery);